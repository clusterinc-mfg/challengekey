{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar _jsxFileName = \"/Users/bradtudor/Documents/interview_challenges/frontend-challenge/src/pages/Home/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Layout from '../../components/Layout/Layout';\nimport Header from '../../components/Header/Header';\nimport FilterMenu from '../../components/FilterMenu/FilterMenu';\nimport BottomBar from '../../components/BottomBar/BottomBar';\nimport { GET_COUNT } from '../../graphQL/queries';\n\nvar HomePage = function HomePage(_ref) {\n  var count = _ref.count;\n  var itemsPerPage = 10;\n\n  var _useState = useState(1),\n      page = _useState[0],\n      setPage = _useState[1]; // const [getAllPrograms, {loading, data, fetchMore}] = useLazyQuery(GET_ALL_PROGRAMS, {\n  //   variables: {\n  //     offset: page-1,\n  //     limit: 10\n  //   },\n  //   fetchPolicy: \"cache-and-network\"\n  // })\n\n\n  useEffect(function () {// getAllPrograms()\n  }, []); // if(data && data.allPrograms){\n  //  console.log(data.allPrograms)\n  // }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, __jsx(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), __jsx(FilterMenu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), __jsx(BottomBar, {\n    page: page,\n    setPage: setPage,\n    numberOfPages: Math.ceil(count / itemsPerPage),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }));\n};\n\nvar getQuery = function getQuery(QUERY, params) {\n  return new _Promise(function _callee(res, rej) {\n    var data;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios({\n              url: \"http://localhost:4000/gql\",\n              method: \"post\",\n              data: {\n                query: GET_COUNT\n              }\n            }));\n\n          case 2:\n            data = _context.sent;\n            res(data);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  });\n};\n\nHomePage.getInitialProps = function _callee2(ctx) {\n  var resp, count;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(getQuery(GET_COUNT));\n\n        case 2:\n          resp = _context2.sent;\n          count = resp.data.data.count;\n          return _context2.abrupt(\"return\", {\n            count: count\n          });\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/bradtudor/Documents/interview_challenges/frontend-challenge/src/pages/Home/index.tsx"],"names":["React","useEffect","useState","axios","Layout","Header","FilterMenu","BottomBar","GET_COUNT","HomePage","count","itemsPerPage","page","setPage","Math","ceil","getQuery","QUERY","params","res","rej","url","method","data","query","getInitialProps","ctx","resp"],"mappings":";;;;AACA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AAEA,SAAQC,SAAR,QAA0C,uBAA1C;;AAaA,IAAMC,QAA0C,GAAG,SAA7CA,QAA6C,OAAa;AAAA,MAAXC,KAAW,QAAXA,KAAW;AAC9D,MAAMC,YAAY,GAAG,EAArB;;AAD8D,kBAEtCT,QAAQ,CAAC,CAAD,CAF8B;AAAA,MAEvDU,IAFuD;AAAA,MAEjDC,OAFiD,iBAI9D;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAZ,EAAAA,SAAS,CAAC,YAAI,CACZ;AACD,GAFQ,EAEN,EAFM,CAAT,CAZ8D,CAgB9D;AACA;AACA;;AAIA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAEA,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,EAIA,MAAC,SAAD;AACE,IAAA,IAAI,EAAEW,IADR;AAEE,IAAA,OAAO,EAAEC,OAFX;AAGE,IAAA,aAAa,EAAEC,IAAI,CAACC,IAAL,CAAUL,KAAK,GAAGC,YAAlB,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJA,CADF;AAYD,CAlCD;;AAoCA,IAAMK,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAQC,MAAR;AAAA,SAAoB,aAAY,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACxBjB,KAAK,CAAC;AAC3BkB,cAAAA,GAAG,EAAE,2BADsB;AAE3BC,cAAAA,MAAM,EAAE,MAFmB;AAG3BC,cAAAA,IAAI,EAAE;AACJC,gBAAAA,KAAK,EAAEhB;AADH;AAHqB,aAAD,CADmB;;AAAA;AACzCe,YAAAA,IADyC;AAQ/CJ,YAAAA,GAAG,CAACI,IAAD,CAAH;;AAR+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAZ,CAApB;AAAA,CAAjB;;AAWAd,QAAQ,CAACgB,eAAT,GAA2B,kBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEJV,QAAQ,CAACR,SAAD,CAFJ;;AAAA;AAErBmB,UAAAA,IAFqB;AAGnBjB,UAAAA,KAHmB,GAGXiB,IAAI,CAACJ,IAAL,CAAUA,IAAV,CAAeb,KAHJ;AAAA,4CAKlB;AAACA,YAAAA,KAAK,EAALA;AAAD,WALkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AASA,eAAeD,QAAf","sourcesContent":["\nimport React, {useEffect, useState} from 'react';\nimport axios from 'axios'\nimport Layout from '../../components/Layout/Layout'\nimport Header from '../../components/Header/Header'\nimport FilterMenu from '../../components/FilterMenu/FilterMenu'\nimport BottomBar from '../../components/BottomBar/BottomBar'\nimport {useLazyQuery} from '@apollo/react-hooks'\nimport {GET_COUNT, GET_ALL_PROGRAMS} from '../../graphQL/queries'\n\nimport ProgramContainer from '../../components/ProgramContainer/ProgramContainer'\n\ntype HomePageProps = {\n  getInitialProps: Function\n  count: number\n}\n\ninterface HomePageInterface<HomePageProps> extends React.FC<HomePageProps> {\n  getInitialProps?: (ctx: any) => Promise<any>\n}\n\nconst HomePage: HomePageInterface<HomePageProps> = ({count}) => {\n  const itemsPerPage = 10\n  const [page, setPage] = useState(1)\n  \n  // const [getAllPrograms, {loading, data, fetchMore}] = useLazyQuery(GET_ALL_PROGRAMS, {\n  //   variables: {\n  //     offset: page-1,\n  //     limit: 10\n  //   },\n  //   fetchPolicy: \"cache-and-network\"\n  // })\n\n  useEffect(()=>{\n    // getAllPrograms()\n  }, [])\n\n  // if(data && data.allPrograms){\n  //  console.log(data.allPrograms)\n  // }\n\n  \n\n  return (\n    <Layout>\n    <Header />\n    <FilterMenu />\n    {/* <ProgramContainer /> */}\n    <BottomBar \n      page={page} \n      setPage={setPage} \n      numberOfPages={Math.ceil(count / itemsPerPage)}\n    />\n  </Layout>\n  )\n}\n\nconst getQuery = (QUERY, params?) => new Promise(async (res, rej)=> {\n  const data:any = await axios({\n    url: \"http://localhost:4000/gql\",\n    method: \"post\",\n    data: {\n      query: GET_COUNT\n    }\n  })\n  res(data)\n})\n\nHomePage.getInitialProps = async(ctx) => {\n  \n  let resp:any = await getQuery(GET_COUNT)\n  const count = resp.data.data.count\n\n  return {count}\n}\n\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}