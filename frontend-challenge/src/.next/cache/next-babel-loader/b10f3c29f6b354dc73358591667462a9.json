{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar _jsxFileName = \"/Users/bradtudor/Documents/interview_challenges/frontend-challenge/src/pages/Home/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Layout from '../../components/Layout/Layout';\nimport Header from '../../components/Header/Header';\nimport FilterMenu from '../../components/FilterMenu/FilterMenu';\nimport BottomBar from '../../components/BottomBar/BottomBar';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport { GET_COUNT, GET_ALL_PROGRAMS } from '../../graphQL/queries';\n\nconst HomePage = ({\n  count\n}) => {\n  const itemsPerPage = 10;\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const [getAllPrograms, {\n    loading,\n    data,\n    fetchMore\n  }] = useLazyQuery(GET_ALL_PROGRAMS, {\n    variables: {\n      offset: page - 1,\n      limit: 10\n    },\n    fetchPolicy: \"cache-and-network\"\n  });\n  useEffect(() => {\n    getAllPrograms();\n  }, []);\n\n  if (data && data.allPrograms) {\n    console.log(data.allPrograms);\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, __jsx(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), __jsx(FilterMenu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), __jsx(BottomBar, {\n    page: page,\n    setPage: setPage,\n    numberOfPages: Math.ceil(count / itemsPerPage),\n    fetchMore: fetchMore,\n    itemsPerPage: itemsPerPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }));\n};\n\nconst getQuery = (QUERY, params) => new _Promise(async (res, rej) => {\n  const data = await axios({\n    url: \"http://localhost:4000/gql\",\n    method: \"post\",\n    data: {\n      query: GET_COUNT\n    }\n  });\n  res(data);\n});\n\nHomePage.getInitialProps = async ctx => {\n  let resp = await getQuery(GET_COUNT);\n  const count = resp.data.data.count;\n  return {\n    count\n  };\n};\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/bradtudor/Documents/interview_challenges/frontend-challenge/src/pages/Home/index.tsx"],"names":["React","useEffect","useState","axios","Layout","Header","FilterMenu","BottomBar","useLazyQuery","GET_COUNT","GET_ALL_PROGRAMS","HomePage","count","itemsPerPage","page","setPage","getAllPrograms","loading","data","fetchMore","variables","offset","limit","fetchPolicy","allPrograms","console","log","Math","ceil","getQuery","QUERY","params","res","rej","url","method","query","getInitialProps","ctx","resp"],"mappings":";;;AACA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,SAAQC,YAAR,QAA2B,qBAA3B;AACA,SAAQC,SAAR,EAAmBC,gBAAnB,QAA0C,uBAA1C;;AAaA,MAAMC,QAA0C,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAa;AAC9D,QAAMC,YAAY,GAAG,EAArB;AACA,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBb,QAAQ,CAAC,CAAD,CAAhC;AAEA,QAAM,CAACc,cAAD,EAAiB;AAACC,IAAAA,OAAD;AAAUC,IAAAA,IAAV;AAAgBC,IAAAA;AAAhB,GAAjB,IAA+CX,YAAY,CAACE,gBAAD,EAAmB;AAClFU,IAAAA,SAAS,EAAE;AACTC,MAAAA,MAAM,EAAEP,IAAI,GAAC,CADJ;AAETQ,MAAAA,KAAK,EAAE;AAFE,KADuE;AAKlFC,IAAAA,WAAW,EAAE;AALqE,GAAnB,CAAjE;AAQAtB,EAAAA,SAAS,CAAC,MAAI;AACZe,IAAAA,cAAc;AACf,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAGE,IAAI,IAAIA,IAAI,CAACM,WAAhB,EAA4B;AAC3BC,IAAAA,OAAO,CAACC,GAAR,CAAYR,IAAI,CAACM,WAAjB;AACA;;AAID,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAEA,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,EAIA,MAAC,SAAD;AACE,IAAA,IAAI,EAAEV,IADR;AAEE,IAAA,OAAO,EAAEC,OAFX;AAGE,IAAA,aAAa,EAAEY,IAAI,CAACC,IAAL,CAAUhB,KAAK,GAAGC,YAAlB,CAHjB;AAIE,IAAA,SAAS,EAAEM,SAJb;AAKE,IAAA,YAAY,EAAEN,YALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJA,CADF;AAcD,CApCD;;AAsCA,MAAMgB,QAAQ,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAoB,aAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAmB;AAClE,QAAMf,IAAQ,GAAG,MAAMf,KAAK,CAAC;AAC3B+B,IAAAA,GAAG,EAAE,2BADsB;AAE3BC,IAAAA,MAAM,EAAE,MAFmB;AAG3BjB,IAAAA,IAAI,EAAE;AACJkB,MAAAA,KAAK,EAAE3B;AADH;AAHqB,GAAD,CAA5B;AAOAuB,EAAAA,GAAG,CAACd,IAAD,CAAH;AACD,CAToC,CAArC;;AAWAP,QAAQ,CAAC0B,eAAT,GAA2B,MAAMC,GAAN,IAAc;AAEvC,MAAIC,IAAQ,GAAG,MAAMV,QAAQ,CAACpB,SAAD,CAA7B;AACA,QAAMG,KAAK,GAAG2B,IAAI,CAACrB,IAAL,CAAUA,IAAV,CAAeN,KAA7B;AAEA,SAAO;AAACA,IAAAA;AAAD,GAAP;AACD,CAND;;AASA,eAAeD,QAAf","sourcesContent":["\nimport React, {useEffect, useState} from 'react';\nimport axios from 'axios'\nimport Layout from '../../components/Layout/Layout'\nimport Header from '../../components/Header/Header'\nimport FilterMenu from '../../components/FilterMenu/FilterMenu'\nimport BottomBar from '../../components/BottomBar/BottomBar'\nimport {useLazyQuery} from '@apollo/react-hooks'\nimport {GET_COUNT, GET_ALL_PROGRAMS} from '../../graphQL/queries'\n\nimport ProgramContainer from '../../components/ProgramContainer/ProgramContainer'\n\ntype HomePageProps = {\n  getInitialProps: Function\n  count: number\n}\n\ninterface HomePageInterface<HomePageProps> extends React.FC<HomePageProps> {\n  getInitialProps?: (ctx: any) => Promise<any>\n}\n\nconst HomePage: HomePageInterface<HomePageProps> = ({count}) => {\n  const itemsPerPage = 10\n  const [page, setPage] = useState(1)\n  \n  const [getAllPrograms, {loading, data, fetchMore}] = useLazyQuery(GET_ALL_PROGRAMS, {\n    variables: {\n      offset: page-1,\n      limit: 10\n    },\n    fetchPolicy: \"cache-and-network\"\n  })\n\n  useEffect(()=>{\n    getAllPrograms()\n  }, [])\n\n  if(data && data.allPrograms){\n   console.log(data.allPrograms)\n  }\n\n  \n\n  return (\n    <Layout>\n    <Header />\n    <FilterMenu />\n    {/* <ProgramContainer /> */}\n    <BottomBar \n      page={page} \n      setPage={setPage} \n      numberOfPages={Math.ceil(count / itemsPerPage)}\n      fetchMore={fetchMore} \n      itemsPerPage={itemsPerPage}\n      />\n  </Layout>\n  )\n}\n\nconst getQuery = (QUERY, params?) => new Promise(async (res, rej)=> {\n  const data:any = await axios({\n    url: \"http://localhost:4000/gql\",\n    method: \"post\",\n    data: {\n      query: GET_COUNT\n    }\n  })\n  res(data)\n})\n\nHomePage.getInitialProps = async(ctx) => {\n  \n  let resp:any = await getQuery(GET_COUNT)\n  const count = resp.data.data.count\n\n  return {count}\n}\n\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}